<!DOCTYPE html>
<html>

<head>
    <title>Select Tools</title>
    <!-- <link rel="stylesheet" href="tools.css"> -->
    <script>
        function validateForm() {
            var checkboxes = document.querySelectorAll('input[type="checkbox"]');
            var checkedCount = 0;
            for (var i = 0; i < checkboxes.length; i++) {
                if (checkboxes[i].checked) {
                    checkedCount++;
                }
            }
            if (checkedCount === 0) {
                alert("Please select at least one option.");
                return false;
            }
            return true;
        }
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
        }

        h1 {
            text-align: center;
            padding: 20px;
            color: #4285F4;
            background-color: #ffffff;
            box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2);
            margin-left: 10px;
            margin-right: 10px;
            border-radius: 15px;
        }
        h2 {
            color: #4285F4;
            font-size: 25px;
            text-shadow: 2px 2px 2px rgba(109, 109, 109, 0.3);
        }
        .container {
            display: flex;
            justify-content: space-between;
        }

        .left-panel {
            margin-left: 10px;
            width: 20%;
            background-color: #f0f0f0;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 5px 0px 10px rgba(0, 0, 0, 0.2);
            min-height: 80vh;
            /* Added */
            max-height: 80vh;
            /* Added */
            overflow-y: auto;
            /* Added for scrolling */
            position: relative;
            /* Added for positioning */
            display: flex;
            flex-direction: column;
            /* Adjusted to column layout */
        }

        .center-panel {
            width: 70%;
            background-color: #ffffff;
            padding: 20px;
            margin-left: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
            margin-right: 20px;
            min-height: 80vh;
            /* Added */
            display: flex;
            flex-direction: column;
            /* Center elements vertically */
        }
        /* .info-container{
            width: 20%;
            display: flex;
            flex-direction: column;
            position: relative;
        } */
        .right-panel {
            margin-right: 10px;
            width: 20%;
            background-color: #f0f0f0;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 5px 0px 10px rgba(0, 0, 0, 0.2);
            min-height: 80vh;
            /* Added */
            max-height: 80vh;
            /* Added */
            overflow-y: auto;
            /* Added for scrolling */
            position: relative;
            /* Added for positioning */
            display: flex;
            flex-direction: column;
            /* Adjusted to column layout */
        }
        .tool-link {
            cursor: pointer;
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #fff;
            border-radius: 10px;
            margin-bottom: 10px;
            text-align: center;
            box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.3);
            font-size: 18px;
        }

        .tool-link:hover {
            background-color: #cbcbcb;
        }

        .op {
            padding: 10px;
            margin-bottom: 30px;
            text-align: center;
            /* background-color: #4285F4; */
            color: #4285F4;
            /* border-radius: 10px; */
            /* box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.3); */
            position: relative; /* Position relative to allow for pseudo-element */
            font-size: 25px;
            font-weight: bold;
            text-shadow: 2px 2px 2px rgba(109, 109, 109, 0.3);
        }

        .op::after {
            content: ""; /* Pseudo-element for the underline */
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px; /* Adjust this value for the thickness of the line */
            background-color: #4285F4; /* Color of the line */
        }



        .logout {
            position: absolute;
            top: 37px;
            right: 20px;
            text-decoration: none;
            color: #fff;
            padding: 10px 20px;
            background-color: #4285F4;
            font-size: 18px;
            box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            border: 1px solid #ccc;
        
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #333;
            font-weight: bold;
            font-size: 18px;
        }

        input[type="checkbox"] {
            margin-right: 10px;
            vertical-align: middle;
            height: 18px;
            width: 18px;
        }

        .logout:hover {
            background-color: #3074ED;
        }

        .install-button-container {
            margin-top: auto;
            /* Pushes the install button to the bottom */
            width: 90%;
            position: absolute;
            bottom: 0;
            left: 0;
            margin-bottom: 20px;
        }

        input[type="submit"] {
            padding: 10px;
            background-color: #4285F4;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
            width: 100%;
            box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.3);
            text-align: center;
            justify-content: space-between;
            margin-left: 20px;
            font-weight: bold;
            
        }

        input[type="submit"]:hover {
            background-color: #3074ED;
        }
        
        .txt1 {
            font-size: 75px;
            color: #bbbaba;
            margin-top: 75px;
            font-weight: bold;
            padding: 5px;
            margin-top: 20%;
            text-shadow: 4px 4px 10px rgba(0, 0, 0, 0.3);
        }

        .txt2 {
            font-size: 30px;
            color: #575757;
            margin-top: 10px;
            font-weight: bold;
            padding: 5px;
        }
        

        #summary-container h2 {
            font-size: 18px;
            font-weight: bold;
            color: #4285F4;
            margin-bottom: 10px;
        }

        #summary-container p {
            margin: 0;
            font-size: 18px;
            color: #333;
            padding: 5px 0;
            font-weight: bold;
        }
        .info-button {
            /* background-color: #007bff; */
            color: #333;
            padding: 2px 7px;
            cursor: pointer;
            margin-left: 10px;
            border-radius: 50%;
            border: 1.5px solid #333;
            font-size: 11px;
        }
    </style>
</head>

<body>
    <h1>DURGA (Defense Utility for Risk Governance and Awareness)</h1>
    <a class="logout" href="{% url "account_logout" %}">Logout</a>
    <form method="post" onsubmit="return validateForm();">
        {% csrf_token %}
        <div class="container">
            <div class="left-panel">
                <div class="op">Select Options</div>
                <div class="tool-link" onclick="showToolSettings('Thread_Detection'); showSubmitButton();">Thread Detection And Prevention
                </div>
                <div class="tool-link" onclick="showToolSettings('Log_Ingestion'); showSubmitButton();">Log Ingestion
                </div>
                <div class="tool-link" onclick="showToolSettings('Log_Analysis'); showSubmitButton();">Log Analysis
                </div>
                <div class="tool-link" onclick="showToolSettings('Backend_Storage'); showSubmitButton();">Backend
                    Storage</div>
                <div class="tool-link" onclick="showToolSettings('Visulization'); showSubmitButton();">Visualization
                </div>
                <div class="tool-link" onclick="showToolSettings('Intelligence_Enrichment'); showSubmitButton();">
                    Intelligence Enrichment</div>
                <div class="tool-link" onclick="showToolSettings('Case_Management'); showSubmitButton();">Case
                    Management</div>
                <div class="tool-link" onclick="showToolSettings('Automate_Automate'); showSubmitButton();">
                    Automate</div>
                <div class="tool-link" onclick="showToolSettings('Investigation'); showSubmitButton();">Investigation
                </div>
                <div class="tool-link" onclick="showToolSettings('Health_Monitoring'); showSubmitButton();">Health
                    Monitoring</div>
                <!-- <div class="install-button-container">
                    <input type="submit" id="submit-button" name="submit" value="Install" style="display: none;" />
                </div> -->
            </div>
            <div class="center-panel" id="center-panel">
                <div>
                    <div class="txt1">Welcome To DURGA Platform</div>
                    <div class="txt2">Guarding with Open Source: Your Digital Safehouse</div>
                </div>
                <div id="checkbox-container"></div> <!-- Container for checkboxes -->
                
            </div>
            <div class="right-panel" id="right-panel" style="display: none;">
                <div class="op">Selected Tools</div>
                <div id="summary-container"></div>
                <div class="install-button-container">
                    <input type="submit" id="submit-button" name="submit" value="Install" style="display: none;" />
                </div>
            </div>
        </div>
    </form>
    <div class="info-container" style="display: none;" >
        <p id="tool-info"></p>
    </div>
    <script>
        var selectedOptions = {};
        // Store checkbox states in local storage
        function storeCheckboxStates(toolName) {
            var checkboxes = document.querySelectorAll('#center-panel input[type="checkbox"]');
            checkboxes.forEach(function (checkbox) {
                localStorage.setItem(toolName + '_' + checkbox.id, checkbox.checked);
            });
        }
        function showToolInfo(toolName) {
            var infoText = '';
            if (toolName === 'Wazuh') {
                infoText = 'Wazuh is a security information and event management (SIEM) tool.';
            } else if (toolName === 'Filebeat') {
                infoText = 'Filebeat is a lightweight log shipper for forwarding log data.';
            } else if (toolName === 'Graylog') {
                infoText = 'Graylog is an open-source log management platform for analyzing log data.';
            } else if (toolName === 'Flentd') {
                infoText = 'Fluentd is an open-source data collector that unifies data collection and consumption.';
            } else if (toolName === 'Rsyslog') {
                infoText = 'Rsyslog is a high-performance log processing system with advanced filtering and routing.';
            } else if (toolName === 'Splunk') {
                infoText = 'Splunk is a platform for searching, monitoring, and analyzing machine-generated data.';
            } else if (toolName === 'LogAnalyzer') {
                infoText = 'LogAnalyzer (formerly known as phpLogCon) is a web-based log analysis tool.';
            } else if (toolName === 'OSSEC') {
                infoText = 'OSSEC is an open-source host-based intrusion detection system (HIDS).';
            } else if (toolName === 'MISP') {
                infoText = 'MISP (Malware Information Sharing Platform) is an open-source threat intelligence platform.';
            } else if (toolName === 'WazuhIndexer') {
                infoText = 'Wazuh Indexer is part of the Wazuh SIEM solution, responsible for indexing data.';
            } else if (toolName === 'Elasticsearch') {
                infoText = 'Elasticsearch is a distributed, RESTful search and analytics engine.';
            } else if (toolName === 'Apache Cassandra') {
                infoText = 'Apache Cassandra is a highly scalable and distributed NoSQL database.';
            } else if (toolName === 'Grafana') {
                infoText = 'Grafana is an open-source analytics and monitoring platform.';
            } else if (toolName === 'Kibana') {
                infoText = 'Kibana is an open-source data visualization and exploration tool.';
            } else if (toolName === 'Cabot') {
                infoText = 'Cabot is an open-source self-hosted infrastructure monitoring platform.';
            } else if (toolName === 'OpenCTI') {
                infoText = 'OpenCTI is an open-source Cyber Threat Intelligence (CTI) platform.';
            } else if (toolName === 'TheHIVE') {
                infoText = 'TheHIVE is an open-source and scalable incident response platform.';
            } else if (toolName === 'RTIR') {
                infoText = 'RTIR (Request Tracker for Incident Response) is an open-source ticketing system for incident response.';
            } else if (toolName === 'Shuffle') {
                infoText = 'Shuffle is an open-source task scheduling and automation platform.';
            } else if (toolName === 'Cortex') {
                infoText = 'Cortex is an open-source observability and automation platform.';
            } else if (toolName === 'Velociraptor') {
                infoText = 'Velociraptor is an open-source endpoint visibility and digital forensics tool.';
            } else if (toolName === 'OSINT') {
                infoText = 'OSINT Framework is an open-source framework for performing OSINT (Open Source Intelligence) investigations.';
            } else if (toolName === 'ElastAlert') {
                infoText = 'ElastAlert is an open-source alerting system for Elasticsearch.';
            } else if (toolName === 'InfluxDB') {
                infoText = 'InfluxDB is an open-source time series database designed for high availability and scalability.';
            } else if (toolName === 'Prometheus') {
                infoText = 'Prometheus is an open-source monitoring and alerting toolkit.';
            }
            alert(infoText);
            // var toolInfoElement = document.getElementById('tool-info');
            // toolInfoElement.textContent = infoText;
            // toolInfoElement.style.display = 'block';
        }
        // Load and update checkbox states from local storage
        function loadCheckboxStates(toolName) {
            var checkboxes = document.querySelectorAll('#center-panel input[type="checkbox"]');
            checkboxes.forEach(function (checkbox) {
                var checkboxState = localStorage.getItem(toolName + '_' + checkbox.id);
                if (checkboxState === 'true') {
                    checkbox.checked = true;
                    selectedOptions[checkbox.name] = true; // Update selected options
                } else {
                    checkbox.checked = false;
                    delete selectedOptions[checkbox.name]; // Remove from selected options
                }

                checkbox.addEventListener('change', function () {
                    if (checkbox.checked) {
                        selectedOptions[checkbox.name] = true;
                    } else {
                        delete selectedOptions[checkbox.name];
                    }
                    localStorage.setItem(toolName + '_' + checkbox.id, checkbox.checked);
                    updateSummary(); // Update the summary when a checkbox is changed
                });
            });
        }

        function showToolSettings(toolName) {
            var centerPanel = document.getElementById('center-panel');
            centerPanel.innerHTML = '';
            centerPanel.style.width = '50%';

            var rightPanel = document.getElementById('right-panel');
            rightPanel.style.display = 'block'; // Show the right panel

            // var infoPanel = document.getElementById('info-container');
            // infoPanel.style.display = 'block';

            if (toolName === 'Log_Ingestion') {
                var settings = '<h2>Log Ingestion Tools</h2>' +
                    '<label for="Flentd">' +
                    '<input type="checkbox" name="Flentd" id="Flentd" value="Flentd"> Flentd' +
                    '</label>' +
                    '<br>' +
                    '<label for="Filebeat">' +
                    '<input type="checkbox" name="Filebeat" id="Filebeat" value="Filebeat"> Filebeat' +
                    '</label>'+
                    '<br>' +
                    // '<label for="Wazuh + EFK">' +
                    // '<input type="checkbox" name="Wazuh + EFK" id="Wazuh + EFK" value="Wazuh + EFK"> Wazuh + EFK ' +
                    // '</label>' +
                    // '<br>'+
                    '<label for="Rsyslog">' +
                    '<input type="checkbox" name="Rsyslog" id="Rsyslog" value="Rsyslog"> Rsyslog ' +
                    '</label>';
                centerPanel.innerHTML = settings;
            } else if (toolName === 'Log_Analysis') {
                var settings = '<h2>Log Analysis Tools</h2>' +
                    '<label for="Graylog">' +
                    '<input type="checkbox" name="Graylog" id="Graylog" value="Graylog"> Graylog' +
                    '</label>' +
                    '<br>' +
                    '<label for="Splunk">' +
                    '<input type="checkbox" name="Splunk" id="Splunk" value="Splunk"> Splunk HEC' +
                    '</label>'+
                    '<br>' +
                    '<label for="LogAnalyzer">' +
                    '<input type="checkbox" name="LogAnalyzer" id="LogAnalyzer" value="LogAnalyzer"> LogAnalyzer (formerly known as phpLogCon)' +
                    '</label>';
                centerPanel.innerHTML = settings;
            } else if (toolName === 'Thread_Detection') {
                var settings = '<h2>Thread Detection And Prevention Tools</h2>' +
                    '<label for="Wazuh">' +
                    '<input type="checkbox" name="Wazuh" id="Wazuh" value="Wazuh"> Wazuh' +
                    '</label>' +
                    '<br>' +
                    '<label for="OSSEC">' +
                    '<input type="checkbox" name="OSSEC" id="OSSEC" value="OSSEC"> OSSEC' +
                    '</label>'+
                    '<br>' +
                    '<label for="MISP">' +
                    '<input type="checkbox" name="MISP" id="MISP" value="MISP"> MISP ((Malware Information Sharing Platform))' +
                    '</label>';
                centerPanel.innerHTML = settings;
            } else if (toolName === 'Backend_Storage') {
                var settings = '<h2>Backend Storage Tools</h2>' +
                    '<label for="WazuhIndexer">' +
                    '<input type="checkbox" name="WazuhIndexer" id="WazuhIndexer" value="WazuhIndexer"> Wazuh Indexer' +
                    '</label>' +
                    '<br>' +
                    '<label for="Elasticsearch">' +
                    '<input type="checkbox" name="Elasticsearch" id="Elasticsearch" value="Elasticsearch"> Elasticsearch' +
                    '</label>'+
                    '<br>' +
                    '<label for="Apache">' +
                    '<input type="checkbox" name="Apache" id="Apache" value="Apache Cassandra"> Apache Cassandra' +
                    '</label>';
                centerPanel.innerHTML = settings;
            } else if (toolName === 'Visulization') {
                var settings = '<h2>Visulization Tools</h2>' +
                    '<label for="Grafana">' +
                    '<input type="checkbox" name="Grafana" id="Grafana" value="Grafana"> Grafana' +
                    '</label>' +
                    '<br>' +
                    '<label for="Kibana">' +
                    '<input type="checkbox" name="Kibana" id="Kibana" value="Kibana"> Kibana' +
                    '</label>'+
                    '<br>' +
                    '<label for="Cabot">' +
                    '<input type="checkbox" name="Cabot" id="Cabot" value="Cabot"> Cabot' +
                    '</label>';
                    // '<br>' +
                    // '<label for="Flentd">' +
                    // '<input type="checkbox" name="Flentd" id="Flentd" value="Flentd"> Flentd' +
                    // '</label>'
                centerPanel.innerHTML = settings;
            } else if (toolName === 'Intelligence_Enrichment') {
                var settings = '<h2>Intelligence Enrichment Tools</h2>' +
                    '<label for="OpenCTI">' +
                    '<input type="checkbox" name="OpenCTI" id="OpenCTI" value="OpenCTI"> OpenCTI' +
                    '</label>' +
                    '<br>' +
                    '<label for="MISP">' +
                    '<input type="checkbox" name="MISP" id="MISP" value="MISP"> MISP (Malware Information Sharing Platform)' +
                    '</label>';
                    
                centerPanel.innerHTML = settings;
            } else if (toolName === 'Case_Management') {
                var settings = '<h2>Case Management Tools</h2>' +
                    '<label for="TheHIVE">' +
                    '<input type="checkbox" name="TheHIVE" id="TheHIVE" value="TheHIVE"> TheHIVE' +
                    '</label>' +
                    '<br>' +
                    '<label for="RTIR">' +
                    '<input type="checkbox" name="RTIR" id="RTIR" value="RTIR"> RTIR (Request Tracker for Incident Response)' +
                    '</label>';
                centerPanel.innerHTML = settings;
            } else if (toolName === 'Automate_Automate') {
                var settings = '<h2>Automate Tools</h2>' +
                    '<label for="Shuffle">' +
                    '<input type="checkbox" name="Shuffle" id="Shuffle" value="Shuffle"> Shuffle' +
                    '</label>' +
                    '<br>' +
                    '<label for="Cortex">' +
                    '<input type="checkbox" name="Cortex" id="Cortex" value="Cortex"> Cortex' +
                    '</label>';
                centerPanel.innerHTML = settings;
            } else if (toolName === 'Investigation') {
                var settings = '<h2>Investigation Tools</h2>' +
                    '<label for="Velociraptor">' +
                    '<input type="checkbox" name="Velociraptor" id="Velociraptor" value="Velociraptor"> Velociraptor' +
                    '</label>' +
                    '<br>' +
                    '<label for="OSINT">' +
                    '<input type="checkbox" name="OSINT" id="OSINT" value="OSINT"> OSINT Framework' +
                    '</label>' +
                    '<br>' +
                    '<label for="ElastAlert">' +
                    '<input type="checkbox" name="ElastAlert" id="ElastAlert" value="ElastAlert"> ElastAlert' +
                    '</label>';
                centerPanel.innerHTML = settings;
            } else if (toolName === 'Health_Monitoring') {
                var settings = '<h2>Health Monitoring Tools</h2>' +
                    '<label for="InfluxDB">' +
                    '<input type="checkbox" name="InfluxDB" id="InfluxDB" value="InfluxDB"> InfluxDB' +
                    '</label>' +
                    '<br>' +
                    '<label for="Prometheus">' +
                    '<input type="checkbox" name="Prometheus" id="Prometheus" value="Prometheus"> Prometheus' +
                    '</label>';
                centerPanel.innerHTML = settings;
            }
            var checkboxes = centerPanel.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(function (checkbox) {
                var toolName = checkbox.value;
                var infoButton = document.createElement('span');
                infoButton.className = 'info-button';
                infoButton.textContent = 'i';
                infoButton.addEventListener('click', function () {
                    showToolInfo(toolName);
                });
                checkbox.parentNode.appendChild(infoButton);
            });

            loadCheckboxStates(toolName);
        }
        
        function updateSummary() {
            var summaryContainer = document.getElementById('summary-container');
            summaryContainer.innerHTML = '';
            for (var option in selectedOptions) {
                if (selectedOptions.hasOwnProperty(option)) {
                    summaryContainer.innerHTML += '<p>' + option + '</p>';
                }
            }
        }
        // Function to show submit button when a tool is selected
        function showSubmitButton() {
            var submitButton = document.getElementById('submit-button');
            submitButton.style.display = 'block';
        }
        window.addEventListener('beforeunload', function () {
            localStorage.clear();
        });
    </script>
</body>

</html>