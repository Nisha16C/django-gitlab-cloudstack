<!DOCTYPE html>
<html>

<head>
    <title>Select Tools</title>
    <!-- <link rel="stylesheet" href="tools.css"> -->
    <script>
        function validateForm() {
            var checkboxes = document.querySelectorAll('input[type="checkbox"]');
            var checkedCount = 0;
            for (var i = 0; i < checkboxes.length; i++) {
                if (checkboxes[i].checked) {
                    checkedCount++;
                }
            }
            if (checkedCount === 0) {
                alert("Please select at least one option.");
                return false;
            }
            return true;
        }
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
        }

        h1 {
            text-align: center;
            padding: 20px;
            color: #4285F4;
            background-color: #ffffff;
            box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2);
            margin-left: 10px;
            margin-right: 10px;
            border-radius: 15px;
        }

        .container {
            display: flex;
            justify-content: space-between;
        }

        .left-panel {
            margin-left: 10px;
            width: 20%;
            background-color: #f0f0f0;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 5px 0px 10px rgba(0, 0, 0, 0.2);
            min-height: 80vh;
            /* Added */
            max-height: 80vh;
            /* Added */
            overflow-y: auto;
            /* Added for scrolling */
            position: relative;
            /* Added for positioning */
            display: flex;
            flex-direction: column;
            /* Adjusted to column layout */
        }

        .right-panel {
            width: 70%;
            background-color: #ffffff;
            padding: 20px;
            margin-left: 15px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
            margin-right: 10px;
            min-height: 80vh;
            /* Added */
            display: flex;
            flex-direction: column;
            /* Center elements vertically */
        }

        .tool-link {
            cursor: pointer;
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #fff;
            border-radius: 10px;
            margin-bottom: 10px;
            text-align: center;
            box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.3);
        }

        .tool-link:hover {
            background-color: #cbcbcb;
        }

        .op {
            padding: 10px;
            margin-bottom: 30px;
            text-align: center;
            /* background-color: #4285F4; */
            color: #4285F4;
            /* border-radius: 10px; */
            /* box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.3); */
            position: relative; /* Position relative to allow for pseudo-element */
            font-size: 20px;
            font-weight: bold;
            text-shadow: 2px 2px 2px rgba(109, 109, 109, 0.3);
        }

        .op::after {
            content: ""; /* Pseudo-element for the underline */
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px; /* Adjust this value for the thickness of the line */
            background-color: #4285F4; /* Color of the line */
        }



        .logout {
            position: absolute;
            top: 37px;
            right: 20px;
            text-decoration: none;
            color: #fff;
            padding: 10px 20px;
            background-color: #4285F4;
            font-size: 17px;
            box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #333;
            font-weight: bold;
        }

        input[type="checkbox"] {
            margin-right: 10px;
            vertical-align: middle;
            height: 18px;
            width: 18px;
        }

        .logout:hover {
            background-color: #3074ED;
        }

        .install-button-container {
            margin-top: auto;
            /* Pushes the install button to the bottom */
            width: 100%;
        }

        input[type="submit"] {
            padding: 10px 20px;
            background-color: #4285F4;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 17px;
            width: 100%;
            box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.3);
        }

        input[type="submit"]:hover {
            background-color: #3074ED;
        }
        
        .txt1 {
            font-size: 75px;
            color: #bbbaba;
            margin-top: 75px;
            font-weight: bold;
            padding: 5px;
            margin-top: 20%;
            text-shadow: 4px 4px 10px rgba(0, 0, 0, 0.3);
        }

        .txt2 {
            font-size: 30px;
            color: #575757;
            margin-top: 10px;
            font-weight: bold;
            padding: 5px;
        }
        

        #summary-container h2 {
            font-size: 18px;
            font-weight: bold;
            color: #4285F4;
            margin-bottom: 10px;
        }

        #summary-container p {
            margin: 0;
            font-size: 15px;
            color: #333;
            padding: 5px 0;
        }
    </style>
</head>

<body>
    <h1>DURGA (Defense Utility for Risk Governance and Awareness)</h1>
    <a class="logout" href="{% url "account_logout" %}">Logout</a>
    <form method="post" onsubmit="return validateForm();">
        {% csrf_token %}
        <div class="container">
            <div class="left-panel">
                <div class="op">Select Options</div>
                <div class="tool-link" onclick="showToolSettings('Log_Ingestion'); showSubmitButton();">Log Ingestion
                </div>
                <div class="tool-link" onclick="showToolSettings('Log_Analysis'); showSubmitButton();">Log Analysis
                </div>
                <div class="tool-link" onclick="showToolSettings('Backend_Storage'); showSubmitButton();">Backend
                    Storage</div>
                <div class="tool-link" onclick="showToolSettings('Visulization'); showSubmitButton();">Visualization
                </div>
                <div class="tool-link" onclick="showToolSettings('Intelligence_Enrichment'); showSubmitButton();">
                    Intelligence Enrichment</div>
                <div class="tool-link" onclick="showToolSettings('Case_Management'); showSubmitButton();">Case
                    Management</div>
                <div class="tool-link" onclick="showToolSettings('Automate_Automate'); showSubmitButton();">Automate
                    Automate</div>
                <div class="tool-link" onclick="showToolSettings('Investigation'); showSubmitButton();">Investigation
                </div>
                <div class="tool-link" onclick="showToolSettings('Health_Monitoring'); showSubmitButton();">Health
                    Monitoring</div>
                <div class="install-button-container">
                    <input type="submit" id="submit-button" name="submit" value="Install" style="display: none;" />
                </div>
            </div>
            <div class="right-panel" id="right-panel">
                <div>
                    <div class="txt1">Welcome To DURGA Platform</div>
                    <div class="txt2">Guarding with Open Source: Your Digital Safehouse</div>
                </div>
                <div id="checkbox-container"></div> <!-- Container for checkboxes -->
                
            </div>
            <div id="summary-container"></div>
        </div>
    </form>
    <script>
        var toolInfo = {
            'Wazuh': 'Wazuh is an open-source security monitoring platform...',
            // Add information for other tools here
        };
        function toggleToolInfo(toolName) {
            var toolInfoContainer = document.getElementById('tool-info-container');
            var currentToolInfo = toolInfoContainer.getAttribute('data-tool');

            // If the clicked tool is already displayed, hide it
            if (currentToolInfo === toolName) {
                toolInfoContainer.style.display = 'none';
                toolInfoContainer.removeAttribute('data-tool');
            } else {
                // Show the tool information
                toolInfoContainer.innerHTML = '<p>' + toolInfo[toolName] + '</p>';
                toolInfoContainer.style.display = 'block';
                toolInfoContainer.setAttribute('data-tool', toolName);
            }
        }
        var selectedOptions = {};
        // Store checkbox states in local storage
        function storeCheckboxStates(toolName) {
            var checkboxes = document.querySelectorAll('#right-panel input[type="checkbox"]');
            checkboxes.forEach(function (checkbox) {
                localStorage.setItem(toolName + '_' + checkbox.id, checkbox.checked);
            });
        }

        // Load and update checkbox states from local storage
        function loadCheckboxStates(toolName) {
            var checkboxes = document.querySelectorAll('#right-panel input[type="checkbox"]');
            checkboxes.forEach(function (checkbox) {
                var checkboxState = localStorage.getItem(toolName + '_' + checkbox.id);
                if (checkboxState === 'true') {
                    checkbox.checked = true;
                    selectedOptions[checkbox.name] = true; // Update selected options
                } else {
                    checkbox.checked = false;
                    delete selectedOptions[checkbox.name]; // Remove from selected options
                }

                checkbox.addEventListener('change', function () {
                    if (checkbox.checked) {
                        selectedOptions[checkbox.name] = true;
                    } else {
                        delete selectedOptions[checkbox.name];
                    }
                    localStorage.setItem(toolName + '_' + checkbox.id, checkbox.checked);
                    updateSummary(); // Update the summary when a checkbox is changed
                });
            });
        }

        function showToolSettings(toolName) {
            var rightPanel = document.getElementById('right-panel');
            rightPanel.innerHTML = '';

            if (toolName === 'Log_Ingestion') {
                var settings = '<h2>Log Ingestion Settings</h2>' +
                    '<label for="SIEMxdr">' +
                    '<input type="checkbox" name="SIEMxdr" id="SIEMxdr" value="SIEMxdr"> Wazuh' +
                    '</label>' +
                    '<br>' +
                    '<label for="Filebeat">' +
                    '<input type="checkbox" name="Filebeat" id="Filebeat" value="Filebeat"> Filebeat' +
                    '</label>'+
                    '<br>' +
                    '<label for="Wazuh_EFK">' +
                    '<input type="checkbox" name="Wazuh_EFK" id="Wazuh_EFK" value="Wazuh_EFK"> Wazuh + EFK' +
                    '</label>';
                rightPanel.innerHTML = settings;
            } else if (toolName === 'Log_Analysis') {
                var settings = '<h2>Log Analysis Settings</h2>' +
                    '<label for="Graylog">' +
                    '<input type="checkbox" name="Graylog" id="Graylog" value="Graylog"> Graylog' +
                    '</label>' +
                    '<br>' +
                    '<label for="Splunk">' +
                    '<input type="checkbox" name="Splunk" id="Splunk" value+"Splunk"> Splunk HEC' +
                    '</label>';
                rightPanel.innerHTML = settings;
            } else if (toolName === 'Backend_Storage') {
                var settings = '<h2>Backend Storage Settings</h2>' +
                    '<label for="WazuhIndexer">' +
                    '<input type="checkbox" name="WazuhIndexer" id="WazuhIndexer" value="WazuhIndexer"> Wazuh Indexer' +
                    '</label>' +
                    '<br>' +
                    '<label for="Elasticsearch">' +
                    '<input type="checkbox" name="Elasticsearch" id="Elasticsearch" value="Elasticsearch"> Elasticsearch' +
                    '</label>';
                rightPanel.innerHTML = settings;
            } else if (toolName === 'Visulization') {
                var settings = '<h2>Visulization Settings</h2>' +
                    '<label for="Grafana">' +
                    '<input type="checkbox" name="Grafana" id="Grafana" value="Grafana"> Grafana' +
                    '</label>' +
                    '<br>' +
                    '<label for="Kibana">' +
                    '<input type="checkbox" name="Kibana" id="Kibana" value="Kibana"> Kibana' +
                    '</label>';
                rightPanel.innerHTML = settings;
            } else if (toolName === 'Intelligence_Enrichment') {
                var settings = '<h2>Intelligence Enrichment Settings</h2>' +
                    '<label for="OpenCTI">' +
                    '<input type="checkbox" name="OpenCTI" id="OpenCTI" value="OpenCTI"> OpenCTI' +
                    '</label>' +
                    '<br>' +
                    '<label for="MISP">' +
                    '<input type="checkbox" name="MISP" id="MISP" value="MISP"> MISP (Malware Information Sharing Platform)' +
                    '</label>';
                rightPanel.innerHTML = settings;
            } else if (toolName === 'Case_Management') {
                var settings = '<h2>Case Management Settings</h2>' +
                    '<label for="TheHIVE">' +
                    '<input type="checkbox" name="TheHIVE" id="TheHIVE" value="TheHIVE"> TheHIVE' +
                    '</label>' +
                    '<br>' +
                    '<label for="RTIR">' +
                    '<input type="checkbox" name="RTIR" id="RTIR" value="RTIR"> RTIR (Request Tracker for Incident Response)' +
                    '</label>';
                rightPanel.innerHTML = settings;
            } else if (toolName === 'Automate_Automate') {
                var settings = '<h2>Automate Automate Settings</h2>' +
                    '<label for="Shuffle">' +
                    '<input type="checkbox" name="Shuffle" id="Shuffle" value="Shuffle"> Shuffle' +
                    '</label>' +
                    '<br>' +
                    '<label for="Cortex">' +
                    '<input type="checkbox" name="Cortex" id="Cortex" value="Cortex"> Cortex' +
                    '</label>';
                rightPanel.innerHTML = settings;
            } else if (toolName === 'Investigation') {
                var settings = '<h2>Investigation Settings</h2>' +
                    '<label for="Velociraptor">' +
                    '<input type="checkbox" name="Velociraptor" id="Velociraptor" value="Velociraptor"> Velociraptor' +
                    '</label>' +
                    '<br>' +
                    '<label for="OSINT">' +
                    '<input type="checkbox" name="OSINT" id="OSINT" value="OSINT"> OSINT Framework' +
                    '</label>';
                rightPanel.innerHTML = settings;
            } else if (toolName === 'Health_Monitoring') {
                var settings = '<h2>Health Monitoring Settings</h2>' +
                    '<label for="InfluxDB">' +
                    '<input type="checkbox" name="InfluxDB" id="InfluxDB" value="InfluxDB"> InfluxDB' +
                    '</label>' +
                    '<br>' +
                    '<label for="Prometheus">' +
                    '<input type="checkbox" name="Prometheus" id="Prometheus" value="Prometheus"> Prometheus' +
                    '</label>';
                rightPanel.innerHTML = settings;
            }

            loadCheckboxStates(toolName);
        }
        
        function updateSummary() {
            var summaryContainer = document.getElementById('summary-container');
            summaryContainer.innerHTML = '<h2>Selected Options</h2>';
            for (var option in selectedOptions) {
                if (selectedOptions.hasOwnProperty(option)) {
                    summaryContainer.innerHTML += '<p>' + option + '</p>';
                }
            }
        }
        // Function to show submit button when a tool is selected
        function showSubmitButton() {
            var submitButton = document.getElementById('submit-button');
            submitButton.style.display = 'block';
        }
        window.addEventListener('beforeunload', function () {
            localStorage.clear();
        });
    </script>
</body>

</html>